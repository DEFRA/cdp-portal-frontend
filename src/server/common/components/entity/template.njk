{% from "govuk/components/tag/macro.njk" import govukTag %}

{% from "time/macro.njk" import appTime %}

{% set classes = "app-entity--paragraph" if params.kind === "paragraph" %}

<div class="app-entity{% if classes %} {{ classes }}{% endif %}"
     data-testid="app-entity{% if params.index %}-{{ params.index }}{% endif %}">

  {% if params.label %}
    <span class="app-entity-label"
          data-testid="app-entity-label">{{ params.label }}:</span>
  {% endif %}

  {% if params.value or params.value == 0 %}

    {% if params.kind === "link" %}
      <a class="app-link"
         href="{{ params.url }}"{% if params.newWindow %} target="_blank" rel="noopener noreferrer"{% endif %}
         data-testid="app-entity-link">
        {{ params.value }}
      </a>

    {% elseif params.kind === "tag" %}
      {{ govukTag({
        text: params.value,
        classes: params.classes,
        attributes: {
          "data-testid": "govuk-tag"
        }
      }) }}

    {% elseif params.kind === "date" %}
      {{ appTime({
        datetime: params.value
      }) }}

    {% elseif params.kind === "text" %}
      {{ params.value }}


    {% elseif params.kind === "paragraph" %}
      {{ params.value | safe }}
    {% endif %}

  {% else %}
    <span class="app-entity-no-value">{{ noValue }}</span>
  {% endif %}
</div>

