<h2 class="govuk-heading-l govuk-!-margin-bottom-2">Create secret</h2>

<p>
  Create a secret in {{ environment | title }}.
</p>

<form action="{{ routeLookup('services/{serviceId}/secrets/{environment}/create', {
  params: {
    serviceId: service.serviceName,
    environment: environment
  }
}) }}" method="post" data-js="app-form-errors">
  <input type="hidden" name="csrfToken" value="{{ csrfToken }}" />
  <input type="hidden" name="teamId" value="{{ teamId }}" />

  {% call govukFieldset() %}

    {{ govukInput({
      id: "secret-key",
      name: "secretKey",
      label: {
        text: "Secret name",
        classes: "app-label"
      },
      classes: "app-input app-input--wide",
      hint: {
        text: "Ideally in CAPS seperated by undercores",
        classes: "app-hint"
      },
      formGroup: {
        classes: "app-form-group app-form-group-js"
      },
      value: formValues.secretKey,
      errorMessage: {
        text: formErrors.secretKey.message,
        classes: "app-error-message",
        attributes: {
          "data-js": "app-error"
        }
      } if formErrors.secretKey.message
    }) }}

    {{ govukInput({
      id: "secret-value",
      name: "secretValue",
      label: {
        text: "Secret value",
        classes: "app-label"
      },
      classes: "app-input app-input--wide",
      hint: {
        text: "Any number, letter or special character. Cannot include spaces",
        classes: "app-hint"
      },
      formGroup: {
        classes: "app-form-group app-form-group-js"
      },
      value: formValues.secretValue,
      errorMessage: {
        text: formErrors.secretValue.message,
        classes: "app-error-message",
        attributes: {
          "data-js": "app-error"
        }
      } if formErrors.secretValue.message
    }) }}

    {{ govukLabel({
      text: "Environment",
      classes: "app-label"
    }) }}

    <p class="govuk-!-margin-bottom-6">{{ environment | title }}</p>

  {% endcall %}

  {{ appButton({
    text: "Create",
    name: "button",
    value: "create",
    loader: {
      name: "create-secret-submit-button"
    }
  }) }}

</form>
